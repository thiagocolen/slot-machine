const e=Object.freeze({SLOT_MACHINE_SIZE:3,REEL_SIZE:60,REEL_OFFSET:3,ANIMATION_DELAY:1e3,ANIMATION_DURATION:2e3,SYMBOL_QTY:4,SPIN_BUTTON_DELAY:800,BASE_URL_DEV:"",BASE_URL_PROD:"https://thiagocolen.github.io/slot-machine"}),t=document.getElementsByTagName("base")[0];t.setAttribute("href",location.href),console.log(t),console.log(location),console.log("process.env.NODE_ENV","production"),e.BASE_URL_PROD,new class{constructor(){this.reel_animations=[],this.previous_reel=[],this.finished_reels=0,this.result=[],this.snd=new Audio("./assets/sounds/mixkit-arcade-slot-machine-wheel-1933.wav"),this.initPreviousReelObj(),this.createSlotMachine(e.SLOT_MACHINE_SIZE),this.createSpinButton(),this.playButton=document.getElementById("play"),this.playButton.addEventListener("click",()=>{console.log(this.snd),this.snd.play()})}initPreviousReelObj(){for(let t=0;t<e.SLOT_MACHINE_SIZE;t++)this.previous_reel.push({slotNumber:t,symbolList:[]})}createSpinButton(){this.spinButton=document.getElementsByClassName("spin-button")[0],this.spinButton.addEventListener("click",()=>{this.spinButton.setAttribute("class","spin-button spin-button-clicked"),setTimeout(()=>{this.spinButton.setAttribute("class","spin-button")},e.SPIN_BUTTON_DELAY),this.spin()})}createSlotMachine(e){this.container=document.getElementsByClassName("slot-machine")[0],this.container.innerHTML="",this.reel_animations=[];for(let t=0;t<e;t++)this.reel_animations.push(this.createReel(t))}createReel(t){let s=document.createElement("div");s.setAttribute("class","reel"),s.setAttribute("id",`slot_${t}`);for(let t=0;t<=e.REEL_SIZE;t++){let t=Math.floor(Math.random()*e.SYMBOL_QTY),i=`
        <div class="symbol symbol_${t}" id="${t}"></div>
        `;s.innerHTML=s.innerHTML+i}return this.previousReelChange(t,s),this.container.appendChild(s),this.createReelAnimation(s)}previousReelChange(t,s){this.previous_reel.forEach(i=>{i.slotNumber===t&&(0===i.symbolList.length?s.prepend(s.children.item(s.children.length-e.REEL_OFFSET-1).cloneNode(!0),s.children.item(s.children.length-e.REEL_OFFSET).cloneNode(!0),s.children.item(s.children.length-e.REEL_OFFSET+1).cloneNode(!0)):s.prepend(...i.symbolList),i.symbolList=[],i.symbolList.push(s.children.item(s.children.length-e.REEL_OFFSET-1),s.children.item(s.children.length-e.REEL_OFFSET),s.children.item(s.children.length-e.REEL_OFFSET+1)))})}createReelAnimation(t){let s=document.getElementsByClassName("symbol")[0].clientHeight,i=[{transform:"translateY(0)"},{transform:`translateY(-${t.clientHeight-4*s}px)`}],n={delay:Math.floor(Math.random()*e.ANIMATION_DELAY),duration:e.ANIMATION_DURATION,easing:"cubic-bezier(.52,.08,.45,1.19)",iterations:1,direction:"normal",fill:"forwards"},l=t.animate(i,n);return l.cancel(),l.onfinish=()=>{this.finished_reels=this.finished_reels+1,this.finished_reels===e.SLOT_MACHINE_SIZE&&(this.getResult(),this.finished_reels=0)},l}spin(){this.createSlotMachine(e.SLOT_MACHINE_SIZE),this.reel_animations.forEach(e=>{e.play()})}getResult(){this.result=[];for(let t=0;t<e.SLOT_MACHINE_SIZE;t++){let s=document.getElementById(`slot_${t}`).children.length-e.REEL_OFFSET;this.result.push(document.getElementById(`slot_${t}`).children[s].getAttribute("id"))}console.log(this.result);let t=this.result.reduce((e,t)=>e===t?t:null);null===t?this.showLost():this.showWin()}showLost(){console.log("Parab\xe9ns, voc\xea tomou no c\xfa!"),console.log("-----------------------------------------")}showWin(){console.log("Parab\xe9ns, voc\xea ganhou! ...nada"),console.log("-----------------------------------------")}};
//# sourceMappingURL=index.d439cdbd.js.map
